"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2880],{32461:(e,s,r)=>{r.d(s,{A:()=>t});var a=r(12115);let t=a.forwardRef(function(e,s){let{title:r,titleId:t,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))})},35695:(e,s,r)=>{var a=r(18999);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},55628:(e,s,r)=>{r.d(s,{A:()=>t});var a=r(12115);let t=a.forwardRef(function(e,s){let{title:r,titleId:t,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},57765:(e,s,r)=>{r.d(s,{A:()=>t});var a=r(12115);let t=a.forwardRef(function(e,s){let{title:r,titleId:t,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},74500:(e,s,r)=>{r.d(s,{A:()=>t});var a=r(12115);let t=a.forwardRef(function(e,s){let{title:r,titleId:t,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},82880:(e,s,r)=>{r.d(s,{A:()=>m});var a=r(95155),t=r(12115),l=r(35695),n=r(32461),d=r(55628),i=r(57765),o=r(74500);let c={id:"",name:"",dateOfBirth:"",gender:"",email:"",phone:"",address:"",mrn:"",insuranceProvider:"",insuranceNumber:"",allergies:[],medications:[],notes:""};function m(e){let{initialData:s,isEditing:m=!1}=e,u=(0,l.useRouter)(),[x,h]=(0,t.useState)(s||c),[g,b]=(0,t.useState)({}),[f,p]=(0,t.useState)(!1),[j,N]=(0,t.useState)(!1),[v,y]=(0,t.useState)(""),[w,k]=(0,t.useState)("");(0,t.useEffect)(()=>{m||(null==s?void 0:s.mrn)||h(e=>({...e,id:"patient_".concat(Date.now()),mrn:"MRN-".concat(Math.floor(1e4+9e4*Math.random()))}))},[m,s]);let P=e=>{let{name:s,value:r}=e.target;h(e=>({...e,[s]:r})),g[s]&&b(e=>{let r={...e};return delete r[s],r})},C=e=>{h(s=>{var r;return{...s,allergies:null===(r=s.allergies)||void 0===r?void 0:r.filter((s,r)=>r!==e)}})},O=e=>{h(s=>{var r;return{...s,medications:null===(r=s.medications)||void 0===r?void 0:r.filter((s,r)=>r!==e)}})},A=async e=>{e.preventDefault();let s={};if(x.name||(s.name="Name is required"),x.dateOfBirth||(s.dateOfBirth="Date of birth is required"),x.gender||(s.gender="Gender is required"),Object.keys(s).length>0){b(s);return}p(!0),N(!1);try{let e={},{auth:s}=await Promise.all([r.e(2992),r.e(9192),r.e(7131),r.e(9224),r.e(3843)]).then(r.bind(r,13843)),a=s.currentUser;if(a){let s=await a.getIdToken();e={Authorization:"Bearer ".concat(s)}}let t=m?await fetch("/api/patients/".concat(x.id),{method:"PUT",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(x)}):await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(x)});if(!t.ok)throw Error("Error: ".concat(t.statusText));let l=await t.json();console.log("Patient saved successfully:",l),N(!0),m||setTimeout(()=>{u.push("/patients")},1500)}catch(e){console.error("Error saving patient:",e),b({form:"An error occurred while saving the patient. Please try again."})}finally{p(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>u.back(),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mt-2",children:m?"Edit Patient":"Add New Patient"})]}),j&&(0,a.jsx)("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-green-700",children:m?"Patient updated successfully!":"Patient added successfully!"})})]})}),g.form&&(0,a.jsx)("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:g.form})})]})}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Personal Information"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Basic details about the patient."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Full Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"text",name:"name",id:"name",value:x.name,onChange:P,"aria-invalid":!!g.name,className:"block w-full rounded-md sm:text-sm ".concat(g.name?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),g.name&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",id:"name-error",children:g.name})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsx)("label",{htmlFor:"mrn",className:"block text-sm font-medium text-gray-700",children:"Medical Record Number (MRN)"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",name:"mrn",id:"mrn",value:x.mrn,onChange:P,disabled:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 sm:text-sm"})})]}),(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsxs)("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:["Date of Birth ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",value:x.dateOfBirth,onChange:P,max:new Date().toISOString().split("T")[0],"aria-invalid":!!g.dateOfBirth,className:"block w-full rounded-md sm:text-sm ".concat(g.dateOfBirth?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),g.dateOfBirth&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",id:"dateOfBirth-error",children:g.dateOfBirth})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsxs)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:["Gender ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsxs)("select",{id:"gender",name:"gender",value:x.gender,onChange:P,"aria-invalid":!!g.gender,className:"block w-full rounded-md sm:text-sm ".concat(g.gender?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),children:[(0,a.jsx)("option",{value:"",children:"Select gender"}),(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"}),(0,a.jsx)("option",{value:"Non-binary",children:"Non-binary"}),(0,a.jsx)("option",{value:"Other",children:"Other"}),(0,a.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),g.gender&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",id:"gender-error",children:g.gender})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Contact Information"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"How to reach the patient."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"email",name:"email",id:"email",value:x.email,onChange:P,"aria-invalid":!!g.email,className:"block w-full rounded-md sm:text-sm ".concat(g.email?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),g.email&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",id:"email-error",children:g.email})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"tel",name:"phone",id:"phone",value:x.phone,onChange:P,"aria-invalid":!!g.phone,className:"block w-full rounded-md sm:text-sm ".concat(g.phone?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),g.phone&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",id:"phone-error",children:g.phone})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-6",children:[(0,a.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"text",name:"address",id:"address",value:x.address,onChange:P,"aria-invalid":!!g.address,className:"block w-full rounded-md sm:text-sm ".concat(g.address?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),g.address&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",id:"address-error",children:g.address})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Insurance Information"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Patient's insurance details."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsx)("label",{htmlFor:"insuranceProvider",className:"block text-sm font-medium text-gray-700",children:"Insurance Provider"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",name:"insuranceProvider",id:"insuranceProvider",value:x.insuranceProvider||"",onChange:P,className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})})]}),(0,a.jsxs)("div",{className:"sm:col-span-3",children:[(0,a.jsx)("label",{htmlFor:"insuranceNumber",className:"block text-sm font-medium text-gray-700",children:"Policy Number"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",name:"insuranceNumber",id:"insuranceNumber",value:x.insuranceNumber||"",onChange:P,className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Medical Information"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Allergies, medications, and other medical details."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Allergies"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"Add an allergy",className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,a.jsx)("button",{type:"button",onClick:()=>{v.trim()&&(h(e=>({...e,allergies:[...e.allergies||[],v.trim()]})),y(""))},className:"ml-2 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})]}),x.allergies&&x.allergies.length>0?(0,a.jsx)("ul",{className:"mt-3 grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:x.allergies.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"flex-1 text-sm",children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>C(s),className:"ml-2 inline-flex items-center p-1 border border-transparent rounded-full text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]},s))}):(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No allergies added."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Medications"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"Add a medication",className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,a.jsx)("button",{type:"button",onClick:()=>{w.trim()&&(h(e=>({...e,medications:[...e.medications||[],w.trim()]})),k(""))},className:"ml-2 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})]}),x.medications&&x.medications.length>0?(0,a.jsx)("ul",{className:"mt-3 grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:x.medications.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"flex-1 text-sm",children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>O(s),className:"ml-2 inline-flex items-center p-1 border border-transparent rounded-full text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]},s))}):(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No medications added."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("textarea",{id:"notes",name:"notes",rows:4,value:x.notes||"",onChange:P,className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Any additional notes about the patient"})})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>u.back(),className:"px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":m?"Update Patient":"Add Patient"})]})]})]})}}}]);