(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2642,3843],{5279:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(12115);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},l),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},13843:(e,a,t)=>{"use strict";let s;t.d(a,{auth:()=>n,db:()=>o});var r=t(23915),l=t(93004),i=t(35317);s=(0,r.Dk)().length?(0,r.Dk)()[0]:(0,r.Wp)({apiKey:"AIzaSyCUXDjtCkalFKkukgedZePOySwYLimkakM",authDomain:"new-awv-app.firebaseapp.com",projectId:"new-awv-app",storageBucket:"new-awv-app.firebasestorage.app",messagingSenderId:"466832878",appId:"1:466832878:web:504bb7a0b7de0705cad2ff"});let n=(0,l.xI)(s),o=(0,i.aU)(s)},18593:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(12115);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},l),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))})},29337:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(12115);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},l),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},35695:(e,a,t)=>{"use strict";var s=t(18999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},40058:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(12115);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},l),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))})},51527:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(95155),r=t(12115),l=t(35695),i=t(93004),n=t(13843),o=t(6874),d=t.n(o),c=t(5279),u=t(29337),m=t(74500),h=t(40058),x=t(18593);function p(){let e=(0,l.useRouter)(),a=(0,l.useSearchParams)().get("token"),[t,o]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[v,g]=(0,r.useState)(""),[w,b]=(0,r.useState)(""),[j,y]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),[A,E]=(0,r.useState)(null),[P,C]=(0,r.useState)(null),[S,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(a){R(!0),k(null);try{let e=await fetch("/api/users/invitation/validate?token=".concat(a));if(!e.ok)throw Error("Invalid or expired invitation token");let t=await e.json();C({email:t.email,role:t.role,organization:t.organization,specialty:t.specialty,valid:!0,expiresAt:t.expiresAt?new Date(t.expiresAt):void 0}),o(t.email)}catch(e){console.error("Error validating token:",e),C({email:"",role:"",valid:!1}),k("The invitation link is invalid or has expired.")}finally{R(!1)}}})()},[a]);let L=()=>(k(null),!a||(null==P?void 0:P.valid))?t?a&&t!==(null==P?void 0:P.email)?(k("You must use the email address from the invitation."),!1):w?p?p.length<8?(k("Password must be at least 8 characters"),!1):p===v||(k("Passwords do not match"),!1):(k("Password is required"),!1):(k("Name is required"),!1):(k("Email is required"),!1):(k("The invitation link is invalid or has expired."),!1),M=async s=>{if(s.preventDefault(),L()){y(!0),k(null);try{let s=(await (0,i.eJ)(n.auth,t,p)).user;await (0,i.r7)(s,{displayName:w});let r={firebaseUid:s.uid,email:s.email,displayName:w,...a?{invitationToken:a}:{}};if(!(await fetch("/api/users/profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await s.getIdToken())},body:JSON.stringify(r)})).ok)throw Error("Failed to create user profile");E("Registration successful! Redirecting to login..."),setTimeout(()=>{e.push(a?"/dashboard":"/login")},2e3)}catch(e){console.error("Registration error:",e),"auth/email-already-in-use"===e.code?k("This email is already registered. Please login instead."):"auth/invalid-email"===e.code?k("Invalid email address."):"auth/weak-password"===e.code?k("Password is too weak. Please use a stronger password."):k("Registration failed: ".concat(e.message))}finally{y(!1)}}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-md",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),a&&(0,s.jsx)("div",{className:"mt-2 text-center",children:S?(0,s.jsxs)("div",{className:"flex items-center justify-center text-blue-600",children:[(0,s.jsx)(c.A,{className:"h-5 w-5 mr-2 animate-spin"}),(0,s.jsx)("span",{children:"Validating invitation..."})]}):(null==P?void 0:P.valid)?(0,s.jsx)("div",{className:"mt-2 bg-green-50 p-3 rounded-md",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-green-800",children:["Valid invitation for ",P.email]}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-green-700",children:["Role: ",P.role,P.organization&&" • ".concat(P.organization)]})]})]})}):(0,s.jsx)("div",{className:"mt-2 bg-red-50 p-3 rounded-md",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(m.A,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Invalid invitation"})})]})})})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:M,children:[(0,s.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:e=>o(e.target.value),disabled:a&&(null==P?void 0:P.valid),className:"mt-1 appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ".concat(a&&(null==P?void 0:P.valid)?"bg-gray-100":""),placeholder:"you@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,s.jsx)("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:w,onChange:e=>b(e.target.value),className:"mt-1 appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"John Doe"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:p,onChange:e=>f(e.target.value),className:"mt-1 appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:v,onChange:e=>g(e.target.value),className:"mt-1 appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••"})]})]}),N&&(0,s.jsx)("div",{className:"bg-red-50 p-3 rounded-md",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(m.A,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-red-800",children:N})})]})}),A&&(0,s.jsx)("div",{className:"bg-green-50 p-3 rounded-md",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-green-800",children:A})})]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:j||a&&!(null==P?void 0:P.valid),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ".concat(j?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ").concat(!a||(null==P?void 0:P.valid)?"":"opacity-50 cursor-not-allowed"),children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"h-5 w-5 mr-2 animate-spin"}),"Creating Account..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"Create Account"]})})})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)(d(),{href:"/login",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"Sign in to your account"]})})]})]})})}function f(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(p,{})})}},74500:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(12115);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},l),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},86090:(e,a,t)=>{Promise.resolve().then(t.bind(t,51527))}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,9192,6874,7131,9224,8441,1684,7358],()=>a(86090)),_N_E=e.O()}]);